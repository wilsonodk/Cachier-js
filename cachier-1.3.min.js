var Cachier=(function(f){var c={},h=this,a=typeof h.localStorage!=="undefined",d="cachier:data:{cid}",j="cachier:type:{cid}",i="cachier:expire:{cid}",k=/\{cid\}/,b=60*60*1000,m=f.stringify,g=f.parse;function l(n){return{data:d.replace(k,n),type:j.replace(k,n),expire:i.replace(k,n)}}function e(o){var p=l(o),n;if(a){n=h.localStorage.getItem(p.data);return n!==null}else{return false}}c.exists=function(n){return e(n)};c.getItem=function(s){var t=l(s),p=(new Date()).getTime(),n,r={cids:t,data:"",error:null,result:false,expires:-1},o,q;if(a){if(e(s)){n=parseInt(h.localStorage.getItem(t.expire));if(p<n){o=h.localStorage.getItem(t.type);q=h.localStorage.getItem(t.data);r.expires=n-p;switch(o){case"object":r.data=g(q);r.result=true;break;case"number":r.data=Number(q);r.result=true;break;case"boolean":r.data=q=="true"?true:false;r.result=true;break;case"string":r.data=q;r.result=true;break;case"function":r.data="";r.result=false;r.error="Function was saved, unable to retrieve the value";break;default:r.data="";r.result=false;r.error="Unknown data type was saved";break}}else{Cachier.removeItem(s);r.error="Expired in cache"}}else{r.error="Cache key undefined"}}else{r.error="The localStorage object is not supported"}return r};c.setItem=function(s,r,o){var q=o||b,n=typeof r,t;if(typeof s!=="string"){return false}switch(n){case"function":return false;break;case"object":r=m(r);break;case"string":break;case"number":case"boolean":default:r=r.toString();break}if(typeof r=="string"){t=l(s);q=(parseInt(q)+(new Date).getTime()).toString();try{h.localStorage.setItem(t.data,r);h.localStorage.setItem(t.type,n);h.localStorage.setItem(t.expire,q)}catch(p){return false}}else{return false}return true};c.removeItem=function(o){try{var p=l(o);h.localStorage.removeItem(p.data);h.localStorage.removeItem(p.type);h.localStorage.removeItem(p.expire)}catch(n){return false}return true};return c}(JSON));