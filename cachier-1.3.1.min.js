var Cachier=(function(h,e){var c={},a=h.localStorage===undefined?false:true,d="cachier:data:{cid}",j="cachier:type:{cid}",i="cachier:expire:{cid}",k=/\{cid\}/,b=60*60*1000,m=e.stringify,g=e.parse;function f(n){return{data:d.replace(k,n),type:j.replace(k,n),expire:i.replace(k,n)}}function l(o){var p=f(o),n;if(a){n=h.localStorage.getItem(p.data)!==null}else{n=false}return n}c.exists=function(n){l(n)};c.getItem=function(s){var t=f(s),p=(new Date()).getTime(),n,o,r,q={cids:t,data:"",error:null,result:false,expires:-1};if(a){if(l(s)){n=parseInt(h.localStorage.getItem(t.expire),10);if(p<n){o=h.localStorage.getItem(t.type);r=h.localStorage.getItem(t.data);q.expires=n-p;switch(o){case"object":q.data=g(r);q.result=true;break;case"number":q.data=Number(r);q.result=true;break;case"boolean":q.data=r==="true"?true:false;q.result=true;break;case"string":q.data=r;q.result=true;break;case"function":q.data="";q.result=false;q.error="Function was saved, unable to retrieve the value";break;default:q.data="";q.result=false;q.error="Unknown data type was saved";break}}else{Cachier.removeItem(s);q.error="Expired in cache"}}else{q.error="Cache key undefined"}}else{q.error="The localStorage object is not supported"}return q};c.setItem=function(s,r,o){var q=o||b,n=typeof r,t;if(typeof s!=="string"){return false}switch(n){case"function":r="function";break;case"object":r=m(r);break;case"string":break;default:r=r.toString();break}if(typeof r==="string"){t=f(s);q=(parseInt(q,10)+(new Date()).getTime()).toString();try{h.localStorage.setItem(t.data,r);h.localStorage.setItem(t.type,n);h.localStorage.setItem(t.expire,q)}catch(p){return false}}else{return false}return true};c.removeItem=function(o){try{var p=f(o);h.localStorage.removeItem(p.data);h.localStorage.removeItem(p.type);h.localStorage.removeItem(p.expire)}catch(n){return false}return true};return c}(window,JSON));